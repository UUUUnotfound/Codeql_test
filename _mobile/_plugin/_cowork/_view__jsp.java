/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp._mobile._plugin._cowork;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import weaver.hrm.*;
import weaver.general.*;
import weaver.systeminfo.*;
import weaver.cowork.*;
import weaver.file.FileUpload;

public class _view__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html; charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      weaver.conn.RecordSet RecordSet;
      RecordSet = (weaver.conn.RecordSet) pageContext.getAttribute("RecordSet");
      if (RecordSet == null) {
        RecordSet = new weaver.conn.RecordSet();
        pageContext.setAttribute("RecordSet", RecordSet);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.hrm.resource.ResourceComInfo ResourceComInfo;
      ResourceComInfo = (weaver.hrm.resource.ResourceComInfo) pageContext.getAttribute("ResourceComInfo");
      if (ResourceComInfo == null) {
        ResourceComInfo = new weaver.hrm.resource.ResourceComInfo();
        pageContext.setAttribute("ResourceComInfo", ResourceComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.cowork.CoTypeComInfo CoTypeComInfo;
      CoTypeComInfo = (weaver.cowork.CoTypeComInfo) pageContext.getAttribute("CoTypeComInfo");
      if (CoTypeComInfo == null) {
        CoTypeComInfo = new weaver.cowork.CoTypeComInfo();
        pageContext.setAttribute("CoTypeComInfo", CoTypeComInfo);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      weaver.cowork.CoworkShareManager CoworkShareManager;
      CoworkShareManager = (weaver.cowork.CoworkShareManager) pageContext.getAttribute("CoworkShareManager");
      if (CoworkShareManager == null) {
        CoworkShareManager = new weaver.cowork.CoworkShareManager();
        pageContext.setAttribute("CoworkShareManager", CoworkShareManager);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      
request.setCharacterEncoding("UTF-8");
response.setContentType("text/html;charset=UTF-8");

User user = HrmUserVarify.getUser (request , response) ;
if(user == null)  return ;
int userid=user.getUID();

FileUpload fu = new FileUpload(request);
String module = Util.null2String((String)fu.getParameter("module"));
String scope = Util.null2String((String)fu.getParameter("scope"));

String title = Util.null2String((String)fu.getParameter("title"));

String clienttype = Util.null2String((String)fu.getParameter("clienttype"));
String clientlevel = Util.null2String((String)fu.getParameter("clientlevel"));

int coworkid = Util.getIntValue(fu.getParameter("detailid"));

String name = "";
String creater = "";
String principal = "";
String typeid = "";
String begindate = "";
String beingtime = "";
String enddate = "";
String endtime = "";
String remark = "";
String approvalAtatus="";
boolean canView=CoworkShareManager.isCanView(""+coworkid,""+userid,"all");
if (coworkid > 0 && canView) {
	CoworkDAO dao = new CoworkDAO(coworkid);
	CoworkItemsVO vo = dao.getCoworkItemsVO();
	name = Util.null2String(vo.getName());                 //\u534f\u4f5c\u540d\u79f0
	creater = Util.null2String(vo.getCreater());           //\u534f\u4f5c\u521b\u5efa\u4eba
	principal=Util.null2String(vo.getPrincipal());         //\u534f\u4f5c\u8d1f\u8d23\u4eba
	typeid=Util.null2String(vo.getTypeid());               //\u6240\u5c5e\u534f\u4f5c\u533a
	begindate = Util.null2String(vo.getBegindate());       //\u5f00\u59cb\u65e5\u671f
	beingtime = Util.null2String(vo.getBeingtime());       //\u5f00\u59cb\u65f6\u95f4      
	enddate = Util.null2String(vo.getEnddate());           //\u7ed3\u675f\u65e5\u671f
	endtime = Util.null2String(vo.getEndtime());           //\u7ed3\u675f\u65f6\u95f4
	remark = Util.null2String(vo.getRemark()).trim();	   //\u8be6\u7ec6\u63cf\u8ff0
	approvalAtatus=vo.getApprovalAtatus();                 //\u5ba1\u6279\u72b6\u6001\uff0c\u5f85\u5ba1\u6279

	//\u6dfb\u52a0\u67e5\u770b\u8005\u8bb0\u5f55
	String sql="select id from cowork_read where coworkid="+coworkid+" and userid="+userid;
	RecordSet.execute(sql);  
	if(!RecordSet.next()){
		sql="insert into cowork_read(coworkid,userid) values("+coworkid+","+userid+")";
		RecordSet.execute(sql);
	}

	//\u6dfb\u52a0\u67e5\u770b\u65e5\u5fd7
	dao.addCoworkLog(coworkid,2,userid,fu);
}

      out.write(_jsp_string2, 0, _jsp_string2.length);
      out.print((clienttype));
      out.write(_jsp_string3, 0, _jsp_string3.length);
      out.print((approvalAtatus));
      out.write(_jsp_string4, 0, _jsp_string4.length);
      out.print((module));
      out.write(_jsp_string5, 0, _jsp_string5.length);
      out.print((scope));
      out.write(_jsp_string6, 0, _jsp_string6.length);
      out.print((module));
      out.write(_jsp_string5, 0, _jsp_string5.length);
      out.print((scope));
      out.write(_jsp_string7, 0, _jsp_string7.length);
      out.print((coworkid));
      out.write(_jsp_string8, 0, _jsp_string8.length);
      out.print((module));
      out.write(_jsp_string5, 0, _jsp_string5.length);
      out.print((scope));
      out.write(_jsp_string7, 0, _jsp_string7.length);
      out.print((coworkid));
      out.write(_jsp_string9, 0, _jsp_string9.length);
      out.print((module));
      out.write(_jsp_string5, 0, _jsp_string5.length);
      out.print((scope));
      out.write(_jsp_string10, 0, _jsp_string10.length);
      if (clienttype.equals("Webclient")) {
      out.write(_jsp_string11, 0, _jsp_string11.length);
      } else {
      out.write(_jsp_string12, 0, _jsp_string12.length);
      }
      out.write(_jsp_string13, 0, _jsp_string13.length);
      out.print((name));
      out.write(_jsp_string14, 0, _jsp_string14.length);
      out.print((fu.getParameter("mobileSession") ));
      out.write(_jsp_string15, 0, _jsp_string15.length);
      out.print((fu.getParameter("module") ));
      out.write(_jsp_string16, 0, _jsp_string16.length);
      out.print((fu.getParameter("scope") ));
      out.write(_jsp_string17, 0, _jsp_string17.length);
      out.print((coworkid));
      out.write(_jsp_string18, 0, _jsp_string18.length);
      
			 if(remark.indexOf("<form")!=-1)
				 remark=remark.replace("<form", "<span").replace("</form>", "</span>").replace("id=\"frmmain\"", "id=\"\"").replace("name=\"frmmain\"", "name=\"\"");
             if(remark.replaceAll("<[^>].*?>","").replaceAll("&nbsp;","").length()>150){
            	 String remarkhtml=remark.replaceAll("<[^>].*?>","").replaceAll("&nbsp;","");
           
      out.write(_jsp_string19, 0, _jsp_string19.length);
      out.print((remarkhtml.substring(0,150)));
      out.write(_jsp_string20, 0, _jsp_string20.length);
      out.print((remark));
      out.write(_jsp_string21, 0, _jsp_string21.length);
      }else{
        	   String remarkhtml = remark;
		   
      out.write(_jsp_string22, 0, _jsp_string22.length);
      out.print((remarkhtml));
      out.write(_jsp_string23, 0, _jsp_string23.length);
      out.print((remark));
      out.write(_jsp_string24, 0, _jsp_string24.length);
      } 
      out.write(_jsp_string25, 0, _jsp_string25.length);
      out.print((name));
      out.write(_jsp_string26, 0, _jsp_string26.length);
      out.print((SystemEnv.getHtmlLabelName(882,user.getLanguage())));
      out.write(_jsp_string27, 0, _jsp_string27.length);
      out.print((Util.toScreen(ResourceComInfo.getResourcename(creater),user.getLanguage())));
      out.write(_jsp_string28, 0, _jsp_string28.length);
      out.print((SystemEnv.getHtmlLabelName(2097,user.getLanguage())));
      out.write(_jsp_string27, 0, _jsp_string27.length);
      out.print((Util.toScreen(ResourceComInfo.getResourcename(principal),user.getLanguage())));
      out.write(_jsp_string29, 0, _jsp_string29.length);
      out.print((SystemEnv.getHtmlLabelName(63,user.getLanguage())));
      out.write('\uff1a');
      out.print((CoTypeComInfo.getCoTypename(typeid)));
      out.write(_jsp_string30, 0, _jsp_string30.length);
      out.print((SystemEnv.getHtmlLabelName(17697,user.getLanguage())));
      out.write('\uff1a');
      out.print((begindate));
      out.write(' ');
      out.print((beingtime));
      out.print((SystemEnv.getHtmlLabelName(15322,user.getLanguage())));
      out.write(_jsp_string31, 0, _jsp_string31.length);
      out.print((enddate));
      out.write(' ');
      out.print((endtime));
      out.write(_jsp_string32, 0, _jsp_string32.length);
      out.print((approvalAtatus.equals("1")?"\u63d0\u4ea4\u5ba1\u6279":"\u63d0\u4ea4"));
      out.write(_jsp_string33, 0, _jsp_string33.length);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("mobile/plugin/cowork/view.jsp"), 6932828474535250398L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string5;
  private final static char []_jsp_string20;
  private final static char []_jsp_string4;
  private final static char []_jsp_string29;
  private final static char []_jsp_string3;
  private final static char []_jsp_string26;
  private final static char []_jsp_string7;
  private final static char []_jsp_string23;
  private final static char []_jsp_string25;
  private final static char []_jsp_string30;
  private final static char []_jsp_string15;
  private final static char []_jsp_string28;
  private final static char []_jsp_string31;
  private final static char []_jsp_string6;
  private final static char []_jsp_string11;
  private final static char []_jsp_string17;
  private final static char []_jsp_string22;
  private final static char []_jsp_string33;
  private final static char []_jsp_string21;
  private final static char []_jsp_string12;
  private final static char []_jsp_string13;
  private final static char []_jsp_string18;
  private final static char []_jsp_string19;
  private final static char []_jsp_string2;
  private final static char []_jsp_string14;
  private final static char []_jsp_string32;
  private final static char []_jsp_string8;
  private final static char []_jsp_string1;
  private final static char []_jsp_string27;
  private final static char []_jsp_string9;
  private final static char []_jsp_string0;
  private final static char []_jsp_string10;
  private final static char []_jsp_string16;
  private final static char []_jsp_string24;
  static {
    _jsp_string5 = "&scope=".toCharArray();
    _jsp_string20 = "...\r\n              	<div class=\"headBtn\" onclick=\"showDetail('all');return false\">\u5c55\u5f00<img style=\"margin-left:15px;\" src=\"/mobile/plugin/cowork/img/open_wev8.png\"></div>\r\n              </div><!-- \u5c55\u5f00 -->\r\n              <div id=\"showAll\" style=\"display: none\">".toCharArray();
    _jsp_string4 = "\";\r\n	\r\n	function highEditor(remarkid,height){\r\n	    height=!height||height<150?150:height;\r\n	    \r\n	    if(jQuery(\"#\"+remarkid).is(\":visible\")){\r\n			\r\n			var  items=[\r\n							'justifyleft', 'justifycenter', 'justifyright','forecolor','bold','italic','fullscreen'\r\n					   ];\r\n				 \r\n			 K.createEditor({\r\n					id : remarkid,\r\n					height :height+'px',\r\n					themeType:'mobile',\r\n					resizeType:1,\r\n					width:'100%',\r\n					uploadJson:'/weaverEditor/jsp/upload_json.jsp',\r\n				    allowFileManager : false,\r\n	                newlineTag:'br',\r\n	                filterMode:false,\r\n					imageTabIndex:1,\r\n					langType : 'en',\r\n	                items : items,\r\n				    afterCreate : function(id) {\r\n						this.focus();\r\n						if(approvalAtatus==1){ //\u5f85\u5ba1\u6279\u72b6\u6001\u7981\u6b62\u53d1\u8a00\r\n							KE.html(remarkid,\"<div style='text-align:center;color:red'>\u5f53\u524d\u4e3a\u5f85\u5ba1\u6279\u72b6\u6001\uff0c\u7981\u6b62\u53d1\u8a00\uff01</div>\");\r\n							this.readonly();\r\n						}\r\n				    }\r\n	   		});\r\n		}\r\n	}\r\n	\r\n	function showReply(obj, coworkdtlid,topdiscussid,replyType){\r\n		if($(obj).hasClass(\"replayBtnDown\")) return;\r\n		$(\".itemcontentReplybox\").remove();\r\n		$(\".replayBtn\").removeClass(\"replayBtnDown\");\r\n		var item=$(obj).parents(\".listitem\");\r\n		var replybox = \"<div class='itemcontentReplybox'>\"\r\n					 + \"  <textarea class='inputArea' name='content' id='replayArea'></textarea>\"\r\n					 + \"  <div style='height:30px;padding-top:10px;'>\"\r\n					 + \"    <div class='opSubmit' onclick='doSave(this)' topdiscussid='\"+topdiscussid+\"' replyType='\"+replyType+\"' replayid='\"+coworkdtlid+\"'>\u63d0\u4ea4</div>\"\r\n					 + \"    <div class='opSubmit' style='margin-left:35px;' onclick='doCancelReply()'>\u53d6\u6d88</div>\"\r\n					 + \"  </div>\"\r\n					 + \"</div>\";\r\n		$(obj).parents(\".listitem\").append(replybox);\r\n		if(isShowEditor) {\r\n			highEditor(\"replayArea\",150);\r\n		}\r\n		$(obj).addClass(\"replayBtnDown\");\r\n	}\r\n	\r\n	function doSave(obj){\r\n	  if(approvalAtatus==\"1\"){\r\n	  	 alert(\"\u5f53\u524d\u4e3a\u5f85\u5ba1\u6279\u72b6\u6001\uff0c\u7981\u6b62\u53d1\u8a00\uff01\");\r\n	  	 return;\r\n	  }\r\n      var item=$(obj).parents(\".listitem\");\r\n      \r\n      if(isShowEditor) {\r\n      	  var editorid=item.find(\"textarea[name='content']\").attr(\"id\");\r\n      	  K.sync(\"#\"+editorid); //\u540c\u6b65\u5185\u5bb9\r\n      }\r\n      \r\n      var content=item.find(\"textarea[name='content']\").val();\r\n      var replayid=0;\r\n      if($(obj).attr(\"replayid\")){\r\n          replayid=$(obj).attr(\"replayid\");\r\n      }\r\n      var replyType=$(obj).attr(\"replyType\");\r\n      var topdiscussid=$(obj).attr(\"topdiscussid\");\r\n      \r\n      if(!isShowEditor){\r\n	      content = content.replace(/&/g,\"&amp;\"); \r\n	      content = content.replace(/</g,\"&lt;\");\r\n	      content = content.replace(/>/g,\"&gt;\");\r\n	      content = content.replace(/\\n/g,\"<br/>\");\r\n	      content = content.replace(/ /g,'&nbsp;');   //\u907f\u514d\u7a7a\u5b57\u7b26\u4ea7\u751f???\u95ee\u9898\r\n	  }\r\n      if(content==\"\"){\r\n         asyncbox.open({\r\n	             html:\"<div style='color:#2475C8;margin:8px;'>\u8bf7\u8f93\u5165\u5185\u5bb9</div>\",\r\n			\u3000\u3000\u3000width : 250,\r\n			\u3000\u3000\u3000height : 150,\r\n			     title : \"\u63d0\u793a\",\r\n			\u3000\u3000\u3000btnsbar : [{\r\n					text : '\u786e\u3000\u5b9a',\r\n					action  : 'ok'\r\n				 }], \r\n			\u3000\u3000\u3000callback : function(action){}\r\n		  });\r\n      }else{\r\n      	  $(obj).removeAttr(\"onclick\").css(\"color\", \"#ACACAC\").text(\"\u5904\u7406\u4e2d..\").siblings(\".opSubmit\").remove();\r\n	      content = encodeURIComponent(content);\r\n	      \r\n	      util.getData({\r\n		    	loadingTarget : document.body,\r\n	    		paras : getUrlParam(\"saveCowork\"),//\u5f97\u6570\u636e\u7684URL,\r\n	    		datas : {remark:content,replayid:replayid,\"topdiscussid\":topdiscussid,\"replyType\":replyType},\r\n	    		callback : function (data){\r\n	    			location.reload();\r\n	    		}\r\n	       });	\r\n      } 	\r\n	}\r\n	\r\n	function doCancelReply(){\r\n		$(\".itemcontentReplybox\").remove();\r\n		$(\".replayBtn\").removeClass(\"replayBtnDown\");\r\n	}\r\n\r\n	$(document).ready(function () {\r\n		if(clienttype==\"android\"||clienttype==\"androidpad\"){\r\n			try{\r\n				clientVersion=mobileInterface.getClientVersion();\r\n			}catch(err){}\r\n			\r\n			isShowEditor = clientVersion >= 16;\r\n		}\r\n		\r\n		if(isShowEditor) {\r\n			highEditor(\"contentInput\",150);\r\n		}\r\n		\r\n		//\u52a0\u8f7d\u6570\u636e\r\n		getDataList(getUrlParam(), true);\r\n	});\r\n	\r\n	/**\r\n	 * \u83b7\u53d6url\u53c2\u6570\r\n	 */\r\n	function getUrlParam(type) {\r\n		var sessionkey = $(\"input[name='sessionkey']\").val();\r\n		var coworkid = $(\"input[name='coworkid']\").val();\r\n		var pageindex = $(\"input[name='pageindex']\").val();\r\n		var pagesize = 0;\r\n		var paras = \"coworkid=\"+coworkid+\"&\";\r\n		if (type==\"more\") {\r\n			pageindex=pageindex*1+1;\r\n			paras=paras+\"operation=getCoworkDetail&pageindex=\"+pageindex; //\u52a0\u8f7d\u975e\u7b2c\u4e00\u9875\r\n		} else if(type==\"saveCowork\") {\r\n		    paras=paras+\"operation=saveCowork\";            //\u63d0\u4ea4\u534f\u4f5c\r\n		} else {\r\n			paras=paras+\"operation=getCoworkDetail\";\r\n		}\r\n		    \r\n		paras =paras+\"&pagesize=\" + pagesize + \r\n			\"&tk\" + new Date().getTime() +\"=1\";\r\n		return paras;\r\n	}\r\n	\r\n	function getDataList(paras, isFirst){\r\n		$(\"#listItemMore\").html(\"<img src='/mobile/plugin/cowork/img/ajax-loader_wev8.gif' style='vertical-align:middle;'>&nbsp;\u6b63\u5728\u52a0\u8f7d...\").unbind(\"click\");\r\n		\r\n	    util.getData({\r\n	    	loadingTarget : document.body,\r\n    		paras : paras,//\u5f97\u6570\u636e\u7684URL,\r\n    		callback : function (data){\r\n    			if(isFirst) {\r\n    				$(\"#listArea\").html(\"\");\r\n    			}\r\n    			\r\n    			if(data.error){\r\n		    		$(\"#listItemMore\").text(\"\u6ca1\u6709\u6570\u636e\");\r\n				} else {\r\n				    //\u9a8c\u8bc1\u6743\u9650 status<=0\u6ca1\u6709\u67e5\u770b\u6743\u9650\r\n				    if(data.status<=0){\r\n				       $(\"#listItemMore\").text(\"\u6ca1\u6709\u67e5\u770b\u6743\u9650\");\r\n				       return ;\r\n				    }\r\n				    \r\n					var sessionkey = $(\"input[name='sessionkey']\").val();\r\n					var pageindex = data.pageindex;\r\n					var pagesize = data.pagesize;\r\n					var count = data.count;\r\n					var ishavepre = data.ishavepre;\r\n					var ishavenext = data.ishavenext\r\n					var pagecount = data.pagecount;\r\n					$(\"input[name='pageindex']\").val(pageindex);\r\n					$(\"input[name='pagesize']\").val(pagesize);\r\n					$(\"input[name='count']\").val(count);\r\n					$(\"input[name='ishavepre']\").val(ishavepre);\r\n					$(\"input[name='ishavenext']\").val(ishavenext);\r\n					$(\"input[name='pagecount']\").val(pagecount);\r\n					\r\n					if(data.coworkList.length==0&&ishavenext!=\"1\") {\r\n						$(\"#listItemMore\").text(\"\u6ca1\u6709\u53ef\u4ee5\u663e\u793a\u7684\u6570\u636e\");\r\n						return;\r\n					}\r\n					\r\n					$(\"#pagecontent_\" + pageindex).remove();\r\n					\r\n					var listItemString = \"<div id='pagecontent_\" + pageindex + \"'>\";\r\n					$.each(data.coworkList, function (i, item){\r\n						var isAnonymous=item.isAnonymous;\r\n						var itemstr=\"<div class='listitem'>\";\r\n                        itemstr 	+= \"<table>\"\r\n									+\"		<TR>\"\r\n									+\"			<TD style='vertical-align:top;width:50px;'>\"\r\n									+\"				<img src='/downloadpic.do?url=\"+(isAnonymous==\"1\"?\"/messager/images/icon_m_wev8.jpg\":item.image)+\"' class='personHeader'/>\"\r\n									+\"			</TD>\"\r\n									+\"			<TD style='color:#666666;padding-left:5px;padding-top:5px;float:left'>\"\r\n									+\"				<div>\"+item.floorNum+\"\u697c&nbsp;<span style='color:#28648E;'>\"+(isAnonymous==\"1\"?\"\u533f\u540d\":item.name)+\"&nbsp;</span>\";\r\n									\r\n							itemstr +=\"<img src='/mobile/plugin/cowork/img/submit_wev8.png'></div>\";\r\n							\r\n							itemstr +=\"				<div style='margin-top:5px;'>\u53d1\u8868\u65f6\u95f4\uff1a\"+item.posttime+\"</div>\"\r\n									+\"			</TD>\"\r\n									+\"			<TD style='vertical-align:top;float:right'>\"\r\n									+\"				<div class='replayBtn' onclick='showReply(this, \"+item.id+\",\"+item.id+\",\\\"reply\\\")'><img src='/mobile/plugin/cowork/img/repop_wev8.png' style='vertical-align:middle;margin-left: 4px;'>&nbsp;<span>\u5f15\u7528</span></div>\"\r\n									+\"				<div class='replayBtn' onclick='showReply(this, \"+item.id+\",\"+item.id+\",\\\"comment\\\")'><img src='/mobile/plugin/cowork/img/repop_wev8.png' style='vertical-align:middle;margin-left: 4px;'>&nbsp;<span>\u8bc4\u8bba</span></div>\"\r\n									+\"			</TD>\"\r\n									+\"		</TR>\"\r\n									+\"</table>\"\r\n									+\"<div class='itemcontent' style='margin-top:5px;'>\";\r\n						if(item.replay) {\r\n							var replayitem = item.replay;\r\n							isAnonymous=replayitem.isAnonymous;\r\n							itemstr +=\"     <div class='replay'>\"\r\n									+\"			<img src='/mobile/plugin/cowork/img/return_wev8.png'>&nbsp;\"+replayitem.floorNum+\"\u697c&nbsp;<span style='color:#28648E;'>\"+(isAnonymous==\"1\"?\"\u533f\u540d\":replayitem.name)+\"&nbsp;</span><img src='/mobile/plugin/cowork/img/submit_wev8.png'>&nbsp;\u53d1\u8868\u65f6\u95f4\uff1a\"+replayitem.posttime\r\n									+\"			<hr class='hr1'></hr>\"\r\n									+\"			<div style='margin-top:5px;'>\"+replayitem.remark2html+\"</div>\"\r\n									+\"		    <div style='\"+(replayitem.relatedacc==\"\"?\"display:none\":\"\")+\"'>\"\r\n									+\"				<div style='margin-top:5px;float:left'>\u76f8\u5173\u9644\u4ef6\uff1a</div>\"\r\n									+\"				<div style='margin-top:5px;float:left'>\"+replayitem.relatedacc+\"</div>\"\r\n									+\"				<div style='clear:left'></div>\"\r\n									+\"		    </div>\"	\r\n									+\"		</div>\"\r\n						}\r\n							itemstr +=\"		<div style='margin-top:5px;'>\"+item.remark2html+\"</div>\"\r\n									+\"		<div style='\"+(item.relatedacc==\"\"?\"display:none\":\"\")+\"'>\"\r\n									+\"			<div style='margin-top:5px;float:left'>\u76f8\u5173\u9644\u4ef6\uff1a</div>\"\r\n									+\"			<div style='margin-top:5px;float:left'>\"+item.relatedacc+\"</div>\"\r\n									+\"			<div style='clear:left'></div>\"\r\n									+\"		</div>\"\r\n									+	getCommentList(item.commentList)	\r\n									+\"</div>\"\r\n									+\"</div>\"\r\n									+\"<div class='hr2'></div>\"\r\n                        \r\n                        listItemString += itemstr;\r\n					});\r\n					\r\n					listItemString += \"</div>\";\r\n					\r\n					$(\"#listArea\").append(listItemString);\r\n					if (ishavenext == \"1\") {\r\n						$(\"#listItemMore\").html(\"\u66f4\u591a...\").bind(\"click\", function () {\r\n							getDataList(getUrlParam(\"more\"), false);\r\n						});\r\n					} else {\r\n						$(\"#listItemMore\").html(\"\u5171\u8ba1\"+count+\"\u6761\");\r\n					}\r\n				}\r\n			}\r\n	    });\r\n	    //\u6700\u540e\u66f4\u65b0\u65f6\u95f4\r\n	    $(\"#lastupdatedate\").html(\"\u6700\u540e\u66f4\u65b0&nbsp;\u4eca\u5929\uff1a\" + util.getCurrentDate4Format(\"hh:mm:ss\") + \"&nbsp;&nbsp;\");\r\n    }\r\n	\r\n	function getCommentList(commentList){\r\n		\r\n		var itemstr=\"\";\r\n		if(commentList.length>0){\r\n			itemstr +=\"<div class='replay'>\"\r\n			$.each(commentList, function (i, item){\r\n				var isAnonymous=item.isAnonymous;\r\n				var commentuserid=item.commentuserid;\r\n				var commentuserName=item.commentuserName;\r\n				if(i>0){\r\n					itemstr+=\"<hr class='hr1'></hr>\";\r\n				}\r\n				itemstr +=\"<div>\"\r\n						+\"			<span style='color:#28648E;'>\"+(isAnonymous==1?\"\u533f\u540d\":item.discussName)+\"&nbsp;</span>\"\r\n						+			(commentuserid==\"0\"?\"\":\"&nbsp;\u56de\u590d<span style='color:#28648E;'>\"+commentuserName+\"&nbsp;</span>\")\r\n						+\"          <img src='/mobile/plugin/cowork/img/replay_wev8.png'>&nbsp;\u8bc4\u8bba\u65f6\u95f4\uff1a\"+item.createdate+\"&nbsp;\"+item.createtime\r\n						+\"			<div style='margin-top:5px;'>\"+item.remark+\"</div>\"\r\n						+\"	</div>\";\r\n			})\r\n			itemstr +=\"</div>\"\r\n		}\r\n		return itemstr;\r\n	}\r\n	\r\n	function showDetail(type){\r\n		if(type==\"all\"){\r\n			$(\"#showAll\").show();\r\n			$(\"#showPart\").hide();\r\n		}else{\r\n			$(\"#showAll\").hide();\r\n			$(\"#showPart\").show();\r\n		}\r\n		$(\"div[detail]\").toggle();\r\n	}\r\n	\r\n	function doLeftButton() {\r\n		location = \"/view.do?module=".toCharArray();
    _jsp_string29 = "</span>\r\n		</div>\r\n		\r\n		<div class=\"pdecblock\" style=\"font-size:13px;display:none\" detail=\"true\">\r\n			<span style=\"margin-left:5px\">".toCharArray();
    _jsp_string3 = "\";\r\n	var approvalAtatus=\"".toCharArray();
    _jsp_string26 = "</span>\r\n			&nbsp;|&nbsp;\r\n			".toCharArray();
    _jsp_string7 = "&fromcowork=true&coworkid=".toCharArray();
    _jsp_string23 = "\r\n		      	<div class=\"headBtn\" onclick=\"showDetail('all');return false\">\u5c55\u5f00<img style=\"margin-left:15px;\" src=\"/mobile/plugin/cowork/img/open_wev8.png\"></div>\r\n		      </div><!-- \u5c55\u5f00 -->\r\n		      <div id=\"showAll\" style=\"display: none\">\r\n			    ".toCharArray();
    _jsp_string25 = "\r\n		</div>\r\n		\r\n		<div style=\"margin-top:2px;margin-bottom:2px;height:5px;width:100%;background-image: url(/mobile/plugin/cowork/img/hr2_wev8.png)\"></div>\r\n		\r\n		<!-- \u534f\u4f5c\u4fe1\u606f -->\r\n		<div style=\"font-size:13px;padding:8px;\">\r\n			<span style=\"font-weight:bold;\">".toCharArray();
    _jsp_string30 = "</span>\r\n			<span style=\"margin-left:50px;\">".toCharArray();
    _jsp_string15 = "\">\r\n		<input type=\"hidden\" name=\"module\" value=\"".toCharArray();
    _jsp_string28 = "</span>\r\n			&nbsp;\r\n			".toCharArray();
    _jsp_string31 = "&nbsp;".toCharArray();
    _jsp_string6 = "\";\r\n		return \"0\";\r\n	}\r\n	\r\n	function doBack() {\r\n		var result = doLeftButton();\r\n		if(result==null||result==\"BACK\"){\r\n			location = \"/home.do\";\r\n		}\r\n	}\r\n\r\n	//\u6253\u5f00\u6587\u6863 \r\n	function opendoc1(docid){\r\n	   	location = \"/mobile/plugin/2/view.jsp?detailid=\"+docid+\"&module=".toCharArray();
    _jsp_string11 = "display:block;".toCharArray();
    _jsp_string17 = "\">\r\n		<!-- \u5f53\u524d\u9875\u7d22\u5f15 -->\r\n		<input type=\"hidden\" name=\"pageindex\" value=\"\">\r\n		<!-- \u6bcf\u9875\u8bb0\u5f55\u6761\u6570 -->\r\n		<input type=\"hidden\" name=\"pagesize\" value=\"5\">\r\n		<!-- \u603b\u8bb0\u5f55\u6761\u6570 -->\r\n		<input type=\"hidden\" name=\"count\" value=\"\">\r\n		<!-- \u662f\u5426\u6709\u4e0a\u4e00\u9875 -->\r\n		<input type=\"hidden\" name=\"ishavepre\" value=\"\">\r\n		<!-- \u662f\u5426\u6709\u4e0b\u4e00\u9875 -->\r\n		<input type=\"hidden\" name=\"ishavenext\" value=\"\">\r\n		<!-- \u603b\u9875\u6570 -->\r\n		<input type=\"hidden\" name=\"pagecount\" value=\"\">\r\n		\r\n		<!-- \u5f53\u524d\u67e5\u770b\u7684\u534f\u4f5cid -->\r\n		<input type=\"hidden\" name=\"coworkid\" value=\"".toCharArray();
    _jsp_string22 = "\r\n		      <div id=\"showPart\">\r\n		      	".toCharArray();
    _jsp_string33 = "</div></div>\r\n		</div>\r\n		\r\n		<div class=\"hr2\"></div>\r\n		\r\n		<div class=\"listArea\" id=\"listArea\"></div>\r\n		<div class='listitemmore' id='listItemMore'></div>\r\n		<div class='hr2'></div>\r\n		\r\n		<div class=\"lastupdatedate\" id=\"lastupdatedate\">\r\n			\u6700\u540e\u66f4\u65b0&nbsp;\u4eca\u5929&nbsp;&nbsp;\r\n		</div>\r\n	</div>\r\n	</div>\r\n</body>\r\n</html>\r\n".toCharArray();
    _jsp_string21 = "\r\n              	<div class=\"headBtn\" onclick=\"showDetail('part');return false\">\u6536\u7f29<img style=\"margin-left:15px;\" src=\"/mobile/plugin/cowork/img/back_wev8.png\"></div>\r\n              </div><!-- \u6536\u7f29 -->\r\n           ".toCharArray();
    _jsp_string12 = "display:none;".toCharArray();
    _jsp_string13 = "\">\r\n		<table style=\"width: 100%; height: 40px;\">\r\n			<tr>\r\n				<td width=\"10%\" align=\"left\" valign=\"middle\" style=\"padding-left:5px;\">\r\n					<a href=\"javascript:doBack();\"  style=\"text-decoration: none;\">\r\n						<div style=\"width:56px;height:26px;background:url('/images/bg-top-btn_wev8.png') no-repeat;text-align:center;line-height:26px;color:#000;\">\r\n						\u8fd4\u56de\r\n						</div>\r\n					</a>\r\n				</td>\r\n				<td align=\"center\" valign=\"middle\">\r\n					<div id=\"view_title\">".toCharArray();
    _jsp_string18 = "\">\r\n		\r\n		<!-- \u5b58\u653e\u5fc5\u987b\u6570\u636e\u533a\u57df END -->\r\n		<div style=\"padding-bottom:10px;padding-top:8px;padding-left:5px;border:1px solid #e5e5e5;background-color:#EFF2F6;margin:5px\">\r\n			".toCharArray();
    _jsp_string19 = "\r\n              <div id=\"showPart\">".toCharArray();
    _jsp_string2 = "\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\r\n	<meta name=\"author\" content=\"Weaver E-Mobile Dev Group\" />\r\n	<meta name=\"description\" content=\"Weaver E-mobile\" />\r\n	<meta name=\"keywords\" content=\"weaver,e-mobile\" />\r\n	<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n	<title>\u534f\u4f5c</title>\r\n	<script type=\"text/javascript\" src=\"/js/jquery/jquery_wev8.js\"></script>\r\n	<script type=\"text/javascript\" src=\"/mobile/plugin/widget/asyncbox/AsyncBox.v1.4_wev8.js\"></script>\r\n	<link rel=\"stylesheet\" href=\"/mobile/plugin/widget/asyncbox/skins/ZCMS/asyncbox_wev8.css\">\r\n	<script type=\"text/javascript\" src=\"/mobile/plugin/cowork/js/script_wev8.js\"></script>\r\n	<script type=\"text/javascript\" src=\"/weaverEditor/kindeditor_wev8.js\"></script>\r\n	<style type=\"text/css\">\r\n		body{\r\n			margin:0px;\r\n		}\r\n	\r\n		#listArea table{\r\n			width:100%;\r\n			border-collapse:collapse;\r\n			border-spacing:0;\r\n		}\r\n		\r\n		#listArea table th,td{\r\n			padding:0;\r\n		}\r\n		\r\n		#view_header {\r\n			width: 100%;\r\n			filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF',endColorstr='#ececec' );\r\n			background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF),to(#ECECEC) );\r\n			background: -moz-linear-gradient(top, white, #ECECEC);\r\n			border-bottom: #CCC solid 1px;\r\n			font-size:9pt;\r\n		}\r\n		#view_title {\r\n			color: #336699;\r\n			font-size: 20px;\r\n			font-weight: bold;\r\n			text-align: center;\r\n		}\r\n	\r\n		.hr1{\r\n			border-top:1px dashed #C9C9C9;\r\n			border-bottom:1px dashed #FFFFFF;\r\n			border-left:0;\r\n		}\r\n	\r\n		.hr2{\r\n			border-bottom:1px solid #C9C9C9;\r\n		}\r\n	\r\n		.replay {\r\n			border:1px solid #C9C9C9;\r\n			background-color: #F1F1F1;\r\n			-webkit-border-radius:4px;\r\n			padding:5px 10px;\r\n			color:#666666\r\n		}\r\n	\r\n		.listitem {\r\n			padding:8px;\r\n			font-size:13px;\r\n		}\r\n	\r\n		.replayBtn {\r\n			width:56px;\r\n			height:20px;\r\n			line-height:20px;\r\n			color:#666666;\r\n			border:1px solid #C9C9C9;\r\n			-webkit-border-radius:10px;\r\n			float:left;\r\n		}\r\n		\r\n		.replayBtnDown {\r\n			background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0, #C9C9C9), color-stop(1, #EAEAEA));\r\n		}\r\n	\r\n		.itemContent {\r\n			padding-left:10px;\r\n			margin-top:10px;\r\n		}\r\n	\r\n		.personHeader {\r\n			border:1px solid #C9C9C9;\r\n			-webkit-border-radius:4px;\r\n			width:50px;\r\n			height:50px;\r\n		}\r\n		\r\n		/* \u66f4\u591a */\r\n		.listitemmore {\r\n			height:46px;\r\n			text-align:center;\r\n			line-height:46px;\r\n			font-weight:bold;\r\n			color:#777878;\r\n			font-size: 13px;\r\n		}\r\n		\r\n		/* \u5217\u8868\u66f4\u65b0\u65f6\u95f4 */\r\n		.lastupdatedate {\r\n			width:100%;\r\n			height:20px;\r\n			text-align:right;\r\n			font-size:12px;\r\n			line-height:20px;\r\n			background:#E1E8EC;\r\n			background: -moz-linear-gradient(0, white, #E1E8EC);\r\n			background:-webkit-gradient(linear, 0 0, 0 100%, from(white), to(#E1E8EC));\r\n		}\r\n		\r\n		.opSubmit {\r\n			margin-top:3px;\r\n			margin-bottom:10px;\r\n			width:59px;\r\n			height:21px;\r\n			line-height:21px;\r\n			border:1px solid #B2B2B2;\r\n			text-align:center;\r\n			-webkit-border-radius:4px;\r\n			background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0, #F0EFEF), color-stop(1, #C9C9C9));\r\n			float:left;\r\n		}\r\n		\r\n		.itemcontentReplybox {\r\n			margin-top:5px;\r\n		}\r\n		\r\n		.inputArea {\r\n			display:block;\r\n			width:93%;\r\n			border-color:#95CBEE;\r\n			-webkit-border-radius:4px;\r\n			color:#ACACAC;\r\n			height:60px;\r\n		}\r\n		\r\n		.headBtn {\r\n			width:72px;\r\n			height:33px;\r\n			line-height:33px;\r\n			padding-left:11px;\r\n			margin:5px 0;\r\n			border:1px solid #79AAD2;\r\n			color:#296591;\r\n			text-shadow:0 1px #FFFFFF;\r\n			font-size: 14px;\r\n			-webkit-border-radius:4px;\r\n			background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0, #D9E6EE), color-stop(1, #C1DBEC));\r\n		}\r\n	  </style>\r\n	<script type=\"text/javascript\">\r\n	var today=new Date();\r\n	\r\n	var clientVersion=0;\r\n	var isShowEditor = true;\r\n	var clienttype=\"".toCharArray();
    _jsp_string14 = "</div>\r\n				</td>\r\n				<td width=\"10%\" align=\"right\" valign=\"middle\" style=\"padding-right:5px;\">\r\n				</td>\r\n			</tr>\r\n		</table>\r\n	</div>\r\n	<div  class=\"content\" style=\"background:#fff;\">\r\n		<!-- \u5b58\u653e\u5fc5\u987b\u6570\u636e\u533a\u57df START -->\r\n		<input type=\"hidden\" name=\"sessionkey\" value=\"".toCharArray();
    _jsp_string32 = "</span>\r\n		</div>\r\n		\r\n		<div class=\"listitem\" style=\"margin-top:5px;\">\r\n			<textarea class=\"inputArea\" name=\"content\" id=\"contentInput\"></textarea>\r\n			<div style='height:30px;padding-top:10px;'><div class=\"opSubmit\" onclick='doSave(this)'>".toCharArray();
    _jsp_string8 = "\";\r\n	}\r\n	\r\n	function opendoc(docid){\r\n	   	location = \"/mobile/plugin/2/view.jsp?detailid=\"+docid+\"&module=".toCharArray();
    _jsp_string1 = "\r\n".toCharArray();
    _jsp_string27 = "\uff1a<span style=\"color:#28648E;\">".toCharArray();
    _jsp_string9 = "\";\r\n	}\r\n	   \r\n	//\u4e0b\u8f7d\u6587\u4ef6\r\n	function downloads(fileid,obj,filename){\r\n	   	filename=filename?filename:\"\";\r\n	   	location = \"/download.do?fileid=\"+fileid+\"&filename=\"+filename+\"&module=".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string10 = "\";\r\n	}\r\n\r\n</script>\r\n</head>\r\n<body onload=\"setTimeout(function() { window.scrollTo(0, 1) }, 100);\" />\r\n<div id=\"view_page\">\r\n	<div id=\"view_header\" style=\"".toCharArray();
    _jsp_string16 = "\">\r\n		<input type=\"hidden\" name=\"scope\" value=\"".toCharArray();
    _jsp_string24 = "\r\n			    <div class=\"headBtn\" onclick=\"showDetail('part');return false\">\u6536\u7f29<img style=\"margin-left:15px;\" src=\"/mobile/plugin/cowork/img/back_wev8.png\"></div>\r\n			  </div><!-- \u6536\u7f29 -->\r\n           ".toCharArray();
  }
}
