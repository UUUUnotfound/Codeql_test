/*
 * JSP generated by Resin-3.1.8 (built Mon, 17 Nov 2008 12:15:21 PST)
 */

package _jsp._mobile._plugin._task;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import java.net.URLDecoder;
import weaver.general.BaseBean;
import java.util.*;
import weaver.hrm.*;
import weaver.systeminfo.*;
import weaver.general.StaticObj;
import weaver.general.Util;
import weaver.hrm.settings.RemindSettings;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

public class _taskmain__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    javax.servlet.ServletContext application = _jsp_application;
    com.caucho.jsp.PageContextImpl pageContext = _jsp_application.getJspApplicationContext().allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);
    javax.servlet.jsp.PageContext _jsp_parentContext = pageContext;
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    response.setContentType("text/html; charset=UTF-8");
    request.setCharacterEncoding("UTF-8");
    try {
      out.write(_jsp_string0, 0, _jsp_string0.length);
      weaver.conn.RecordSet rs;
      rs = (weaver.conn.RecordSet) pageContext.getAttribute("rs");
      if (rs == null) {
        rs = new weaver.conn.RecordSet();
        pageContext.setAttribute("rs", rs);
      }
      out.write(_jsp_string1, 0, _jsp_string1.length);
      
	
	response.setHeader("cache-control", "no-cache");
	response.setHeader("pragma", "no-cache");
	response.setHeader("expires", "Mon 1 Jan 1990 00:00:00 GMT");
	

	User user = HrmUserVarify.getUser (request , response) ;
	if(user == null)  return ;
	Log logger= LogFactory.getLog(this.getClass());
	String isIE = (String)session.getAttribute("browser_isie");

      out.write(_jsp_string2, 0, _jsp_string2.length);
      
	response.setHeader("Cache-Control","no-store");
	response.setHeader("Pragrma","no-cache");
	response.setDateHeader("Expires",0);
	
	BaseBean bb = new BaseBean();
	if(Util.getIntValue(bb.getPropValue("workrelate_task","status"),0)!=1
		&&Util.getIntValue(bb.getPropValue("workrelate","istask"),0)!=1){
		out.print("<table width='100%'><tr><td align='center'>\u60a8\u7684\u7cfb\u7edf\u672a\u5f00\u542f\u4efb\u52a1\u7ba1\u7406\u6a21\u5757<br/>\u8bf7\u8054\u7cfb\u6cdb\u5fae\u670d\u52a1\u4eba\u5458</td></tr></table>");
		return;
	}
	
	String clienttype = Util.null2String((String)request.getParameter("clienttype"));
	String clientlevel = Util.null2String((String)request.getParameter("clientlevel"));
	String module=Util.null2String((String)request.getParameter("module"));
	String scope=Util.null2String((String)request.getParameter("scope"));
	
	int MENU_TYPE = Util.getIntValue(request.getParameter("MENUTYPE"),-1);
	int LIST_TYPE = Util.getIntValue(request.getParameter("LIST_TYPE"),-1);
	int STATUS = Util.getIntValue(request.getParameter("STATUS"),-1);
	int viewId = 0;
	String SELTAG = "";
	rs.executeSql("select * from TM_TaskView where userid="+user.getUID());
	if(rs.next()){
		viewId = Util.getIntValue(rs.getString("id"),0);
		if(MENU_TYPE<0||MENU_TYPE>8){
			MENU_TYPE = Util.getIntValue(rs.getString("menutype"),1);
		}
		if(LIST_TYPE<0){
			LIST_TYPE = Util.getIntValue(rs.getString("listtype"),5);
		}
		if(STATUS<0){
			STATUS = Util.getIntValue(rs.getString("status"),0);
		}
		SELTAG = Util.null2String(rs.getString("seltag"));
	}else{
		MENU_TYPE = 1;
		LIST_TYPE = 5;
		STATUS = 0;
	}
	if(LIST_TYPE==5) STATUS = 1;//todo\u89c6\u56fe\u67e5\u8fdb\u884c\u4e2d
	String param = "clienttype="+clienttype+"&clientlevel="+clientlevel+"&module="+module+"&scope="+scope;
	//\u67e5\u8be2\u662f\u5426\u6709\u4e0b\u5c5e
	boolean hassub = false;
	rs.executeSql("select count(id) as amount from hrmresource where loginid<>'' and loginid is not null and (status =0 or status = 1 or status = 2 or status = 3) and managerid=" + user.getUID());
	int count = 0;
	if(rs.next()){
		 count = Util.getIntValue(rs.getString(1),0);
	 }
	if(count>0) hassub = true;
	int hrmid = Util.getIntValue(request.getParameter("hrmid"),0);

      out.write(_jsp_string3, 0, _jsp_string3.length);
      if("".equals(clienttype)||clienttype.equals("Webclient")){
      out.write(_jsp_string4, 0, _jsp_string4.length);
      }
      out.write(_jsp_string5, 0, _jsp_string5.length);
      if(STATUS==0){ 
      out.write(_jsp_string6, 0, _jsp_string6.length);
      }else if(STATUS==1){ 
      out.write(_jsp_string7, 0, _jsp_string7.length);
      }else if(STATUS==2){ 
      out.write(_jsp_string8, 0, _jsp_string8.length);
      }else if(STATUS==3){ 
      out.write(_jsp_string9, 0, _jsp_string9.length);
      } 
      out.write(_jsp_string10, 0, _jsp_string10.length);
      out.print((SELTAG ));
      out.write(_jsp_string11, 0, _jsp_string11.length);
      if(hassub){ 
      out.write(_jsp_string12, 0, _jsp_string12.length);
      } 
      out.write(_jsp_string13, 0, _jsp_string13.length);
      out.print((param));
      out.write(_jsp_string14, 0, _jsp_string14.length);
      out.print((viewId));
      out.write(_jsp_string15, 0, _jsp_string15.length);
      out.print((hrmid));
      out.write(_jsp_string16, 0, _jsp_string16.length);
      out.print((MENU_TYPE));
      out.write(_jsp_string17, 0, _jsp_string17.length);
      out.print((LIST_TYPE));
      out.write(_jsp_string18, 0, _jsp_string18.length);
      out.print((STATUS));
      out.write(_jsp_string19, 0, _jsp_string19.length);
      out.print((SELTAG));
      out.write(_jsp_string20, 0, _jsp_string20.length);
      if("".equals(clienttype)||clienttype.equals("Webclient")){
      out.write(_jsp_string21, 0, _jsp_string21.length);
      }
      out.write(_jsp_string22, 0, _jsp_string22.length);
      if("".equals(clienttype)||clienttype.equals("Webclient")){
      out.write(_jsp_string23, 0, _jsp_string23.length);
      }
      out.write(_jsp_string24, 0, _jsp_string24.length);
      out.print((SystemEnv.getHtmlLabelName(1290,user.getLanguage()) ));
      out.write(_jsp_string25, 0, _jsp_string25.length);
      if(hassub){ 
      out.write(_jsp_string26, 0, _jsp_string26.length);
      }
      out.write(_jsp_string27, 0, _jsp_string27.length);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_application.getJspApplicationContext().freePageContext(pageContext);
    }
  }

  private java.util.ArrayList _caucho_depends = new java.util.ArrayList();

  public java.util.ArrayList _caucho_getDependList()
  {
    return _caucho_depends;
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;
    if (com.caucho.server.util.CauchoSystem.getVersionId() != 1886798272571451039L)
      return true;
    for (int i = _caucho_depends.size() - 1; i >= 0; i--) {
      com.caucho.vfs.Dependency depend;
      depend = (com.caucho.vfs.Dependency) _caucho_depends.get(i);
      if (depend.isModified())
        return true;
    }
    return false;
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void init(ServletConfig config)
    throws ServletException
  {
    com.caucho.server.webapp.WebApp webApp
      = (com.caucho.server.webapp.WebApp) config.getServletContext();
    super.init(config);
    com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
    com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.PageContextImpl(webApp, this);
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("mobile/plugin/task/taskMain.jsp"), -1062373236455112746L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("page/maint/common/initNoCache.jsp"), 3270256153856711871L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
    depend = new com.caucho.vfs.Depend(appDir.lookup("secondwev/common/head.jsp"), -3748581346628043986L, false);
    com.caucho.jsp.JavaPage.addDepend(_caucho_depends, depend);
  }

  private final static char []_jsp_string25;
  private final static char []_jsp_string16;
  private final static char []_jsp_string8;
  private final static char []_jsp_string13;
  private final static char []_jsp_string22;
  private final static char []_jsp_string23;
  private final static char []_jsp_string27;
  private final static char []_jsp_string14;
  private final static char []_jsp_string9;
  private final static char []_jsp_string11;
  private final static char []_jsp_string0;
  private final static char []_jsp_string18;
  private final static char []_jsp_string26;
  private final static char []_jsp_string15;
  private final static char []_jsp_string3;
  private final static char []_jsp_string17;
  private final static char []_jsp_string1;
  private final static char []_jsp_string5;
  private final static char []_jsp_string20;
  private final static char []_jsp_string10;
  private final static char []_jsp_string6;
  private final static char []_jsp_string4;
  private final static char []_jsp_string7;
  private final static char []_jsp_string21;
  private final static char []_jsp_string12;
  private final static char []_jsp_string19;
  private final static char []_jsp_string24;
  private final static char []_jsp_string2;
  static {
    _jsp_string25 = "\";\r\n		}\r\n		function getRightButton(){ \r\n			return \"1,\u7b5b\u9009\";\r\n		}\r\n		function doRightButton(){\r\n			$(\"#taskMenu\").toggle();\r\n			return \"1\";\r\n		}\r\n		function doLeftButton(){\r\n			if(HRMID!=0)\r\n				location.href=\"/mobile/plugin/task/subList.jsp?\"+param;\r\n			else	\r\n				window.location = \"/home.do\";\r\n			return \"1\";\r\n		}\r\n		$(document).bind(\"click\",function(e){\r\n			var target=$.event.fix(e).target;\r\n			if($(target).attr(\"id\")!=\"rightBtn\"){\r\n				$(\"#taskMenu\").hide();\r\n			}\r\n			if($(target).attr(\"id\")!=\"statusShow\"){\r\n				$(\"#statusSel\").hide();\r\n			}\r\n			if($(target).attr(\"id\")!=\"listType\"&&$(target).attr(\"id\")!=\"target\"){\r\n				$(\"#listType\").hide();\r\n				$(\"#target\").removeClass(\"dragClick\").show();\r\n			}\r\n		});\r\n		//\u7ed1\u5b9a\u53f3\u4fa7\u83dc\u5355\r\n		function getMenus(){\r\n			var menuStr='['+\r\n	        '{\"title\":\"\u6211\u7684\u4efb\u52a1\",\"url\":\"/mobile/plugin/task/taskMain.jsp?MENUTYPE=1\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myTask.png\"},';\r\n	        ".toCharArray();
    _jsp_string16 = "\";\r\n		var MENU_TYPE = \"".toCharArray();
    _jsp_string8 = "\r\n								&nbsp;&nbsp;&nbsp;\u5df2\u5b8c\u6210\r\n								".toCharArray();
    _jsp_string13 = "\r\n			<tr><td menuType=\"3\">\u6211\u8d1f\u8d23\u7684</td></tr>\r\n			<tr><td menuType=\"4\">\u6211\u53c2\u4e0e\u7684</td></tr>\r\n			<tr><td menuType=\"6\">\u6211\u5173\u6ce8\u7684</td></tr>\r\n			<tr><td menuType=\"2\">\u6211\u521b\u5efa\u7684</td></tr>\r\n			<tr><td menuType=\"8\">\u6211\u5206\u914d\u7684</td></tr>\r\n			<tr><td menuType=\"5\">\u5206\u4eab\u7ed9\u6211\u7684</td></tr>\r\n			<tr><td menuType=\"0\">\u6240\u6709\u4efb\u52a1</td></tr>\r\n			<tr><td menuType=\"7\">\u5df2\u5b8c\u6210\u65b0\u53cd\u9988</td></tr>\r\n		</table>\r\n	</div>\r\n	<!-- \u53f3\u4e0a\u7b5b\u9009\u83dc\u5355\u70b9\u51fb\u5f39\u51fa\u90e8\u5206END -->\r\n	\r\n	<!-- \u53ef\u62d6\u52a8DIV\u548c\u70b9\u51fb\u540e\u5f39\u51fa\u7684\u89c6\u56fe\u9009\u62e9DIV START -->\r\n	<div class=\"dragDiv\" id=\"target\"></div>\r\n	<div class=\"listType\" id=\"listType\">\r\n		<table cellpadding=\"0\" cellspacing=\"0\">\r\n			<tr>\r\n				<td colspan=\"3\" align=\"center\"><span listType=\"5\" class=\"todoSpan\">TodoList</span></td>\r\n			</tr>\r\n			<tr>\r\n				<td align=\"center\"><span listType=\"2\" class=\"dateSpan\">\u5230\u671f\u89c6\u56fe</span></td>\r\n				<td align=\"center\"><span listType=\"-1\" class=\"newSpan\">&nbsp;</span></td>\r\n				<td align=\"center\"><span listType=\"3\" class=\"levSpan\">\u91cd\u8981\u7d27\u6025</span></td>\r\n			</tr>\r\n			<tr>\r\n				<td colspan=\"3\" align=\"center\" valign=\"top\"><span listType=\"1\" class=\"listSpan\">\u5217\u8868\u89c6\u56fe</span></td>\r\n			</tr>\r\n		</table>\r\n	</div>\r\n	<!-- \u53ef\u62d6\u52a8DIV\u548c\u70b9\u51fb\u540e\u5f39\u51fa\u7684\u89c6\u56fe\u9009\u62e9DIV END -->\r\n	\r\n	<script type=\"text/javascript\">\r\n		var param = \"".toCharArray();
    _jsp_string22 = "\r\n		getMenus();\r\n		$(document).ready(function(){\r\n		\r\n			$(\"#tabblank\").height($(\"#topmain\").height());//\u5360\u4f4dfixed\u51fa\u6765\u7684\u7a7a\u95f4\r\n			\r\n			$(\"#taskMenu .bottomTable tr td\").each(function(){//\u521d\u59cb\u5316\u6309\u94ae\u70b9\u51fb\u6837\u5f0f\r\n				if($(this).attr(\"menuType\")==MENU_TYPE){\r\n					$(this).addClass(\"click\");\r\n					return false;\r\n				}\r\n			});\r\n			\r\n			$(\"#taskBottom .bottomTable tr td\").each(function(){//\u521d\u59cb\u5316\u6309\u94ae\u70b9\u51fb\u6837\u5f0f\r\n				if($(this).attr(\"listType\")==LIST_TYPE){\r\n					$(this).addClass(\"click\");\r\n					return false;\r\n				}\r\n			});\r\n			\r\n			$(\".listTable\").live(\"click\",function(e){//\u4efb\u52a1\u70b9\u51fb\u8df3\u8f6c\u8be6\u7ec6\u9875\u9762\r\n				var taskId = $(this).attr(\"taskId\");\r\n				showLoading();\r\n				location.href=\"/mobile/plugin/task/taskDetail.jsp?taskId=\"+taskId+\"&\"+param+\"&ifFb=\"+$(this).attr(\"ifFb\")+\"&hrmid=\"+HRMID;\r\n			});\r\n			\r\n			$(\"#taskMenu .bottomTable tr td\").click(function(){//menuType\u70b9\u51fb\u4e8b\u4ef6\r\n				$(\"#taskMenu .bottomTable tr td\").removeClass(\"click\");\r\n				$(this).addClass(\"click\");\r\n				var menuType = $(this).attr(\"menuType\");\r\n				if(menuType==MENU_TYPE) return;\r\n				if(menuType==-1){//\u65b0\u5efa\u4efb\u52a1\r\n					createTask(\"\");\r\n				}else if(menuType==-2){//\u67e5\u770b\u4e0b\u5c5e\u4efb\u52a1\r\n					location.href=\"/mobile/plugin/task/subList.jsp?\"+param;\r\n				}else{//\u5207\u6362\u6761\u4ef6\u67e5\u8be2\u4efb\u52a1\r\n					HRMID = \"0\";\r\n					MENU_TYPE = menuType;\r\n					getTaskList();\r\n				}\r\n			});\r\n			\r\n			$(\"#taskBottom .bottomTable tr td\").click(function(){//listType\u70b9\u51fb\u4e8b\u4ef6\r\n				$(\"#taskBottom .bottomTable tr td\").removeClass(\"click\");\r\n				$(this).addClass(\"click\");\r\n				var listType = $(this).attr(\"listType\");\r\n				if(listType==LIST_TYPE) return;\r\n				LIST_TYPE = listType;\r\n				if(listType==5)STATUS = 1;//\u70b9\u51fbtodo\u5c06\u72b6\u6001\u7f6e\u4e3a1\r\n				getTaskList();\r\n			});\r\n			changeStatusShow();//\u662f\u5426\u663e\u793a\u72b6\u6001\u9009\u62e9\r\n			\r\n			getTaskList();//\u9875\u9762\u52a0\u8f7d\u81ea\u52a8\u89e6\u53d1\u4e00\u6b21\u52a0\u8f7d\u66f4\u591a\u4e8b\u4ef6 \u52a0\u8f7d\u6211\u7684todo\u4efb\u52a1\r\n			\r\n			$(window).scroll(function(){//\u6eda\u52a8\u65f6\u5019\u81ea\u52a8\u56fa\u5b9a\u6807\u9898\r\n				if(LIST_TYPE!=1){\r\n					var scroll = $(document).scrollTop();\r\n					if(scroll>0){\r\n						for(var i=0;i<5;i++){\r\n							var tp = $(\"#itemTitle\"+i).offset().top;\r\n							if(tp<(scroll+TOP_TITLE)){\r\n								$(\"#itemTitle_Float\").html($(\"#itemTitle\"+i).html());\r\n								$(\"#floattitle\").show();\r\n							}\r\n						}\r\n					}else{\r\n						$(\"#floattitle\").hide();\r\n					}\r\n				}\r\n				//\u56fa\u5b9a\u641c\u7d22\u6846\r\n				//$(\"#taskSelectDiv\").css(\"top\",scroll+selTop);\r\n			});\r\n			$(\".showMoreTask\").live(\"click\",function(){//\u52a0\u8f7d\u66f4\u591a\r\n				var itemType = $(this).attr(\"itemType\");\r\n				var pageNumStr = \"pageNum_\"+LIST_TYPE+\"_\"+MENU_TYPE+\"_\"+itemType;\r\n				var pageNum = $(\"#\"+pageNumStr).val();\r\n				getData(itemType,pageNum);\r\n				\r\n			});\r\n			\r\n			$(\".titleCreate\").live(\"click\",function(){//\u521b\u5efa\u4efb\u52a1\u70b9\u51fb\r\n				var itemType = parseInt($(this).attr(\"itemType\"))+1;\r\n				createTask(itemType);\r\n			});\r\n			\r\n			$(\"div.statusSelOpn\").bind(\"mouseover\",function(){//\u72b6\u6001\u9009\u9879\u70b9\u51fb\u89e6\u53d1\r\n				$(this).addClass(\"statusSelOpn_hover\");\r\n			}).bind(\"mouseout\",function(){\r\n				$(this).removeClass(\"statusSelOpn_hover\");\r\n			}).bind(\"click\",function(){\r\n				var status = $(this).attr(\"status\");\r\n				if(status==STATUS){\r\n					$(\"#statusSel\").hide();\r\n					return;\r\n				}\r\n				STATUS = status;\r\n				$(\"#statusShow\").html($(this).html());\r\n				getTaskList();\r\n			});\r\n			\r\n			$(\"#statusShow\").bind(\"click\",function(){//\u663e\u793a\u72b6\u6001\u9009\u62e9\r\n				var _t = 33;\r\n				".toCharArray();
    _jsp_string23 = "\r\n					_t = 73;\r\n				".toCharArray();
    _jsp_string27 = "\r\n	        menuStr+='{\"title\":\"\u6211\u8d1f\u8d23\u7684\",\"url\":\"/mobile/plugin/task/taskMain.jsp?MENUTYPE=3\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myDuty.png\"},'+\r\n	        '{\"title\":\"\u6211\u53c2\u4e0e\u7684\",\"url\":\"/mobile/plugin/task/taskMain.jsp?MENUTYPE=4\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myPartn.png\"},'+\r\n	        '{\"title\":\"\u6211\u5173\u6ce8\u7684\",\"url\":\"/mobile/plugin/task/taskMain.jsp?MENUTYPE=6\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myFav.png\"},'+\r\n	        '{\"title\":\"\u6211\u521b\u5efa\u7684\",\"url\":\"/mobile/plugin/task/taskMain.jsp?MENUTYPE=2\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myCreate.png\"},'+\r\n	        '{\"title\":\"\u6211\u5206\u914d\u7684\",\"url\":\"/mobile/plugin/task/taskMain.jsp?MENUTYPE=8\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myAssign.png\"},'+\r\n	        '{\"title\":\"\u5206\u4eab\u7ed9\u6211\u7684\",\"url\":\"/mobile/plugin/task/taskMain.jsp?MENUTYPE=5\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myShare.png\"},'+\r\n	        '{\"title\":\"\u6240\u6709\u4efb\u52a1\",\"url\":\"/mobile/plugin/task/taskMain.jsp?MENUTYPE=0\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myAll.png\"},'+\r\n	        '{\"title\":\"\u5df2\u5b8c\u6210\u65b0\u53cd\u9988\",\"url\":\"/mobile/plugin/task/taskMain.jsp?MENUTYPE=7\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myFinish.png\"}'+\r\n	        ']';\r\n			return menuStr;               \r\n		}\r\n	</script>\r\n</body>\r\n</html>".toCharArray();
    _jsp_string14 = "\";\r\n		var viewId = \"".toCharArray();
    _jsp_string9 = "\r\n								&nbsp;&nbsp;&nbsp;\u5df2\u64a4\u9500\r\n								".toCharArray();
    _jsp_string11 = "\" placeholder=\"\u8bf7\u8f93\u5165\u540d\u79f0\u6216\u6807\u7b7e\u641c\u7d22\"/>\r\n								</div>\r\n								<div class=\"selBtn\">&nbsp;</div>\r\n							</td>\r\n							<td width=\"5\"></td>\r\n						</tr>\r\n					</table>\r\n				</div>\r\n				<div id=\"statusSel\" class=\"statusSel\">\r\n					<div class=\"statusSelOpn\" status=\"0\">&nbsp;&nbsp;&nbsp;\u5168\u90e8</div>\r\n					<div class=\"statusSelOpn\" status=\"1\">&nbsp;&nbsp;&nbsp;\u8fdb\u884c\u4e2d</div>\r\n					<div class=\"statusSelOpn\" status=\"2\">&nbsp;&nbsp;&nbsp;\u5df2\u5b8c\u6210</div>\r\n					<div class=\"statusSelOpn\" status=\"3\">&nbsp;&nbsp;&nbsp;\u5df2\u64a4\u9500</div>\r\n				</div>\r\n				<!-- \u72b6\u6001\u9009\u62e9\u548c\u641c\u7d22\u6846 END -->\r\n				<div id=\"tabSelBlank\" class=\"tabblank\"></div><!-- \u7ad9\u4f4d\u9876\u90e8\u641c\u7d22FIXED\u7684\u7a7a\u767d -->\r\n				<div id=\"list\" class=\"list\"><!-- \u6570\u636e\u5c55\u793a -->\r\n					<div class=\"listItemTypeDiv\" id=\"itemType0\"><div class=\"loadTips\">&nbsp;</div></div>\r\n					<div class=\"listItemTypeDiv\" id=\"itemType1\"><div class=\"loadTips\">&nbsp;</div></div>\r\n					<div class=\"listItemTypeDiv\" id=\"itemType2\"><div class=\"loadTips\">&nbsp;</div></div>\r\n					<div class=\"listItemTypeDiv\" id=\"itemType3\"><div class=\"loadTips\">&nbsp;</div></div>\r\n					<div class=\"listItemTypeDiv\" id=\"itemType4\"><div class=\"loadTips\">&nbsp;</div></div>\r\n					<div class=\"optDiv\">\r\n						\r\n					</div>\r\n				</div>\r\n				<!-- \u6d6e\u52a8\u4eca\u5929\u3001\u660e\u5929\u6807\u9898 -->\r\n				<div class=\"floattitle\" id=\"floattitle\">\r\n					<div class=\"itemTitle\" id=\"itemTitle_Float\"></div>\r\n				</div>\r\n		</td>\r\n	</tr>\r\n	</table>\r\n	<!-- \u53f3\u4e0a\u7b5b\u9009\u83dc\u5355\u70b9\u51fb\u5f39\u51fa\u90e8\u5206 START-->\r\n	<div class=\"taskMenu\" id=\"taskMenu\">\r\n		<table class=\"bottomTable\">\r\n			<tr><td menuType=\"1\">\u6211\u7684\u4efb\u52a1</td></tr>\r\n			".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n".toCharArray();
    _jsp_string18 = "\";//todo\r\n		var STATUS = \"".toCharArray();
    _jsp_string26 = "\r\n	        	menuStr += '{\"title\":\"\u4e0b\u5c5e\u4efb\u52a1\",\"url\":\"/mobile/plugin/task/subList.jsp\",\"target\":\"_self\",\"icon\":\"/mobile/plugin/task/images/myFinish.png\"},'\r\n	        ".toCharArray();
    _jsp_string15 = "\";\r\n		var HRMID = \"".toCharArray();
    _jsp_string3 = "\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n<html>\r\n<head>\r\n	<meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\">\r\n	<meta http-equiv=\"Cache-Control\" content=\"no-cache,must-revalidate\"/>\r\n	<meta http-equiv=\"Pragma\" content=\"no-cache\"/>\r\n	<meta http-equiv=\"Expires\" content=\"0\"/>\r\n	<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\r\n	<meta name=\"author\" content=\"Weaver E-Mobile Dev Group\" />\r\n	<meta name=\"description\" content=\"Weaver E-mobile\" />\r\n	<meta name=\"keywords\" content=\"weaver,e-mobile\" />\r\n	<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1.0, maximum-scale=1.0\" />\r\n	<title></title>\r\n	<script type='text/javascript' src='/mobile/plugin/task/js/jquery-1.8.3.js'></script>\r\n	<script type='text/javascript' src='/mobile/plugin/task/js/task.js'></script>\r\n	<!-- \u89e6\u6478\u4e8b\u4ef6JS  -->\r\n	<script type='text/javascript' src='/mobile/plugin/task/js/touch-0.2.14.js'></script>\r\n	<!-- \u906e\u7f69\u5c42 -->\r\n	<script type='text/javascript' src='/mobile/plugin/task/js/showLoading/js/jquery.showLoading.js'></script>\r\n	<link rel=\"stylesheet\" href=\"/mobile/plugin/task/js/showLoading/css/showLoading.css\" />\r\n	\r\n	<link rel=\"stylesheet\" href=\"/mobile/plugin/task/css/task.css\" />\r\n	\r\n	<style type=\"text/css\">\r\n		".toCharArray();
    _jsp_string17 = "\";//\u6211\u7684\u4efb\u52a1\r\n		var LIST_TYPE = \"".toCharArray();
    _jsp_string1 = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string5 = "\r\n	</style>\r\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/secondwev/css/transbrowser.css\" />\r\n<script type='text/javascript' src=\"/secondwev/js/jQuery.transE8Browser.js\"></script>\r\n<script type='text/javascript' src=\"/js/ecology8/request/e8.browser_wev8.js\"></script>\r\n\r\n	</head>\r\n<body id=\"body\">\r\n	<table class=\"taskTable\" cellpadding=\"0\" cellspacing=\"0\">\r\n		<tr>\r\n			<td valign=\"top\">\r\n				<div id=\"topmain\" class=\"topmain\"><!-- \u9876\u90e8 -->\r\n					<div id=\"header\">\r\n						<table style=\"width: 100%;height: 40px;\">\r\n							<tr>\r\n								<td width=\"10%\" align=\"left\" valign=\"middle\" style=\"padding-left:5px;\">\r\n									<div class=\"taskTopBtn\" onclick=\"doLeftButton()\">\u8fd4\u56de</div>\r\n								</td>\r\n								<td align=\"center\" valign=\"middle\">\r\n									<div id=\"title\">\u4efb\u52a1</div>\r\n								</td>\r\n								<td width=\"10%\" align=\"right\" valign=\"middle\" style=\"padding-right:5px;\">\r\n									<div id=\"rightBtn\" class=\"taskTopBtn\" onclick=\"doRightButton()\">\u7b5b\u9009</div>\r\n								</td>\r\n							</tr>\r\n						</table>\r\n					</div>\r\n				</div>\r\n				<div id=\"tabblank\" class=\"tabblank\"></div><!-- \u7ad9\u4f4d\u9876\u90e8\u5bfc\u822aFIXED\u7684\u7a7a\u767d -->\r\n				<!-- \u72b6\u6001\u9009\u62e9\u548c\u641c\u7d22\u6846 START -->\r\n				<div class=\"taskSelectDiv\" id=\"taskSelectDiv\">\r\n					<table width=\"100%\" height=\"100%\">\r\n						<tr>\r\n							<td width=\"5\"></td>\r\n							<td width=\"82\" id=\"tsTd1\">\r\n							<div id=\"statusShow\" class=\"statusShow\">\r\n								".toCharArray();
    _jsp_string20 = "\";//\u641c\u7d22\u5173\u952e\u5b57\r\n		var TOP_TITLE = 0;\r\n		".toCharArray();
    _jsp_string10 = "\r\n							</div></td>\r\n							<td width=\"*\" id=\"tdTd2\" style=\"position:relative;overflow:hidden;height:28px;\">\r\n								<div class=\"selInput\">\r\n								<input type=\"text\" id=\"selTag\" value=\"".toCharArray();
    _jsp_string6 = "\r\n								&nbsp;&nbsp;&nbsp;\u5168\u90e8\r\n								".toCharArray();
    _jsp_string4 = "\r\n			#header{display: block;}\r\n			.taskSelectDiv{top:40px;}\r\n			.floattitle{top:40px;}\r\n		".toCharArray();
    _jsp_string7 = "\r\n								&nbsp;&nbsp;&nbsp;\u8fdb\u884c\u4e2d\r\n								".toCharArray();
    _jsp_string21 = "\r\n			TOP_TITLE = 40;\r\n		".toCharArray();
    _jsp_string12 = "\r\n			<tr><td menuType=\"-2\">\u4e0b\u5c5e\u4efb\u52a1</td></tr>\r\n			".toCharArray();
    _jsp_string19 = "\";//\u4efb\u52a1\u72b6\u6001\r\n		var SELTAG = \"".toCharArray();
    _jsp_string24 = "\r\n				var _l = $(\"#statusShow\").position().left;\r\n				$(\"#statusSel\").css({\"top\":_t,\"left\":_l}).show();\r\n			});\r\n			\r\n			$(\"div.selBtn\").click(function(){//\u8f93\u5165\u5173\u952e\u5b57\u67e5\u8be2\r\n				var selTag = $.trim($(\"#selTag\").val());\r\n				SELTAG = selTag;\r\n				getTaskList();\r\n			});\r\n			//\u641c\u7d22\u6846\u7ed1\u5b9a\u4e8b\u4ef6\r\n			$(\"#selTag\").bind(\"focus\",function(){\r\n				$(\"div.selInput\").addClass(\"selInputFocus\");\r\n				$(\"div.selBtn\").addClass(\"selInputFocus\");\r\n				//$(\"#taskSelectDiv\").css(\"position\",\"absolute\");\r\n			}).bind(\"blur\",function(){\r\n				$(\"div.selInput\").removeClass(\"selInputFocus\");\r\n				$(\"div.selBtn\").removeClass(\"selInputFocus\");\r\n				//$(\"#taskSelectDiv\").css(\"position\",\"fixed\");\r\n			}).keyup(function(event) {\r\n				var keyCode = event.keyCode;\r\n				if (keyCode == 13) {\r\n					var selTag = $.trim($(\"#selTag\").val());\r\n					SELTAG = selTag;\r\n					getTaskList();\r\n					$(\"#selTag\").blur();\r\n				}\r\n			});\r\n			\r\n			//\u53ef\u62d6\u52a8\u6309\u94ae\r\n			var dx, dy,offx,offy;var dragged = false;\r\n			touch.on('#target', 'touchstart', function(ev){\r\n				$(\"#target\").addClass(\"dragClick\");\r\n				ev.preventDefault();\r\n			});\r\n			touch.on('#target', 'touchend', function(ev){\r\n				if(dragged) return;\r\n				$(this).hide();\r\n				var width = $(\".taskTable\").width();\r\n				$(\"#listType\").css(\"width\",width-40)\r\n				.css(\"top\",($(window).height()-$(\"#listType\").height())/2)\r\n				.css(\"left\",\"20px\").show();\r\n			});\r\n			touch.on('#target', 'drag', function(ev){\r\n				dx = dx || 0;\r\n				dy = dy || 0;\r\n				offx = dx + ev.x;\r\n				offy = dy + ev.y;\r\n				var dHeight = document.body.clientHeight-150;\r\n				if(Math.abs(offy)>dHeight) offy = 0-dHeight;\r\n				if(offy>0) offy = 0;\r\n				this.style.webkitTransform = \"translate3d(\" + offx + \"px,\" + offy + \"px,0)\";\r\n				if(Math.abs(offx)>10||Math.abs(offy)>10)\r\n					dragged = true;\r\n			});\r\n			touch.on('#target', 'dragend', function(ev){\r\n				this.style.webkitTransform = \"translate3d(0px,\" + offy + \"px,0)\";\r\n				$(\"#target\").removeClass(\"dragClick\");\r\n				dx = 0;\r\n				dy = ev.y;\r\n   				dragged = false;\r\n			});\r\n			\r\n			$(\"#listType table td span\").click(function(){\r\n				var listType = $(this).attr(\"listType\");\r\n				if(listType==-1){//\u65b0\u5efa\u4efb\u52a1\r\n					createTask(\"\");\r\n					return;\r\n				}\r\n				if(listType==LIST_TYPE) return;\r\n				LIST_TYPE = listType;\r\n				if(listType==5)STATUS = 1;//\u70b9\u51fbtodo\u5c06\u72b6\u6001\u7f6e\u4e3a1\r\n				getTaskList();\r\n			});\r\n			//\u5220\u9664\r\n			$(\"div.item_del\").live(\"click\",function(){\r\n				setFinish($(this),4);\r\n			});\r\n			//\u53cd\u9988\r\n			$(\"div.item_fb\").live(\"click\",function(){\r\n				$(\"#listTable_\"+$(this).attr(\"taskid\")).attr(\"ifFb\",1).click();\r\n			});\r\n			//\u5173\u6ce8\r\n			$(\"div.item_att\").live(\"click\",function(){\r\n				addFav($(this));\r\n			});\r\n			//\u5b8c\u6210\r\n			$(\"div.item_status\").live(\"click\",function(){\r\n				var status = $(this).attr(\"status\");\r\n				if(status==1){//\u4e3a1\u8868\u793a\u5f53\u524d\u72b6\u6001\u662f\u8fdb\u884c\u4e2d\uff0c\u8fdb\u884c\u7684\u64cd\u4f5c\u65f6\u6807\u8bb0\u5b8c\u6210\r\n					setFinish($(this),2);\r\n				}else if(status==2){\r\n					setFinish($(this),1);\r\n				}\r\n			});\r\n			\r\n		});\r\n		\r\n		function addFav(obj){//\u6dfb\u52a0\u5173\u6ce8\r\n			showLoading();\r\n			var special = obj.attr(\"special\");\r\n			$.ajax({\r\n				type: \"post\",\r\n			    url: \"/mobile/plugin/task/favOperation.jsp\",\r\n			    data:{\"taskid\":obj.attr(\"taskid\"),\"special\":special}, \r\n			    dataType:\"json\",\r\n			    success:function(data){\r\n			    	if(data.status==0){\r\n			    		if(special==0){\r\n			    			obj.html(\"\u53d6\u6d88\u5173\u6ce8\").attr(\"special\",1);\r\n			    		}else{\r\n			    			obj.html(\"\u6dfb\u52a0\u5173\u6ce8\").attr(\"special\",0);\r\n			    		}\r\n			    		//$(\"#operate_\"+obj.attr(\"taskid\")).animate({right:\"-280px\"},300).attr(\"ifShow\",1);\r\n			    	}else{\r\n			    		alert(data.msg);\r\n			    	}\r\n			    },\r\n			    complete: function(data){\r\n			    	hideLoading();\r\n				}\r\n		    });\r\n		}\r\n		\r\n		function setFinish(obj,status){//\u6539\u53d8\u72b6\u6001\uff0c\u6807\u8bb0\u5b8c\u6210\u3001\u8fdb\u884c\u4e2d\u3001\u5220\u9664\r\n			if(status==4){\r\n				if(!confirm(\"\u786e\u5b9a\u5220\u9664\u6b64\u4efb\u52a1?\")){\r\n					return;\r\n				}\r\n			}\r\n			showLoading();\r\n			$.ajax({\r\n				type: \"post\",\r\n			    url: \"/mobile/plugin/task/changeStatus.jsp\",\r\n			    data:{\"taskid\":obj.attr(\"taskid\"),\"status\":status}, \r\n			    dataType:\"json\",\r\n			    success:function(data){\r\n			    	if(data.status==0){\r\n			    		if(status==1){//\u6807\u8bb0\u8fdb\u884c\r\n			    			obj.html(\"\u6807\u8bb0\u5b8c\u6210\");\r\n			    			obj.attr(\"status\",1);\r\n			    		}else if(status==2){//\u6807\u8bb0\u5b8c\u6210\r\n			    			obj.html(\"\u6807\u8bb0\u8fdb\u884c\");\r\n			    			obj.attr(\"status\",2);\r\n			    		}else if(status==4){//\u5220\u9664\r\n			    			$(\"#listItem\"+obj.attr(\"taskid\")).remove();\r\n			    		}\r\n			    		//$(\"#operate_\"+obj.attr(\"taskid\")).animate({right:\"-280px\"},300).attr(\"ifShow\",1);\r\n			    	}else{\r\n			    		alert(data.msg);\r\n			    	}\r\n			    },\r\n			    complete: function(data){\r\n			    	hideLoading();\r\n				}\r\n		    });\r\n		}\r\n		\r\n		function createTask(itemType){//\u521b\u5efa\u4efb\u52a1\u8df3\u8f6c\r\n			showLoading();\r\n			location.href=\"/mobile/plugin/task/taskAdd.jsp?sorttype=\"+LIST_TYPE+\"&datetype=\"+itemType+\"&\"+param;\r\n		}\r\n		\r\n		function getTaskList(){//\u67e5\u8be2\u4efb\u52a1\u6570\u636e\r\n			if(LIST_TYPE!=1){\r\n				for(var i=0;i<5;i++){\r\n					getData(i,0);\r\n				}\r\n			}else{\r\n				$(\".listItemTypeDiv\").hide();\r\n				getData(0,0);\r\n			}\r\n			$(\"#floattitle\").hide();\r\n			changeStatusShow();//\u5207\u6362\u662f\u5426\u663e\u793a\u72b6\u6001\u9009\u62e9\r\n		}\r\n		\r\n		function getData(itemType,pageNum){//\u52a0\u8f7d\u4efb\u52a1\u5217\u8868\u5177\u4f53\u5904\u7406\u65b9\u6cd5\r\n			$(\"#itemType\"+itemType).show().showLoading();\r\n			pageNum = parseInt(pageNum)+1;\r\n			$.ajax({\r\n				url:\"/mobile/plugin/task/getTaskList.jsp\",\r\n				data:{\"pageNum\":pageNum,\"menuType\":MENU_TYPE,\"listType\":LIST_TYPE,\r\n				\"itemType\":itemType,\"status\":STATUS,\"SELTAG\":SELTAG,\"viewId\":viewId,\"hrmid\":HRMID},\r\n				type:\"post\",\r\n				success:function(data){\r\n					if(pageNum==1)\r\n						$(\"#itemType\"+itemType).html(data);\r\n					else\r\n						$(\"#itemContent\"+itemType).append(data);\r\n					var pageNumStr = \"pageNum_\"+LIST_TYPE+\"_\"+MENU_TYPE+\"_\"+itemType;\r\n					var totalPageStr = \"totalPage_\"+LIST_TYPE+\"_\"+MENU_TYPE+\"_\"+itemType;\r\n					var showMoreStr = \"showMoreTask_\"+LIST_TYPE+\"_\"+MENU_TYPE+\"_\"+itemType;\r\n					var totalPage = $(\"#\"+totalPageStr).val();\r\n					if(totalPage<=pageNum){\r\n						$(\"#\"+showMoreStr).hide();\r\n					}\r\n					$(\"#\"+pageNumStr).val(pageNum);\r\n					if(pageNum==1&&itemType==0)\r\n						viewId = $(\"#viewId\").val();\r\n				},\r\n				error:function(data){\r\n					$(\"#list\").html(\"<div class='taskTips'>\u5217\u8868\u52a0\u8f7d\u5931\u8d25,\u8bf7\u7a0d\u540e\u518d\u8bd5</div>\");\r\n				},\r\n				complete:function(){\r\n					$(\"#itemType\"+itemType).hideLoading();\r\n				}\r\n			});\r\n		}\r\n		\r\n		function changeStatusShow(){//\u663e\u793a\u548c\u9690\u85cf\u72b6\u6001\u9009\u9879\r\n			if(LIST_TYPE==5){\r\n				$(\"#tsTd1\").css(\"width\",\"0\").hide();\r\n			}else{\r\n				$(\"#tsTd1\").css(\"width\",\"82\").show();\r\n			}\r\n		}\r\n		\r\n		var startX = 0,startY = 0;\r\n		function swipestart(e,taskid){\r\n			//$(\"#listItem\"+taskid).append(\"start\");\r\n		}\r\n		\r\n		function swipe(e,taskid){\r\n			if(e.type==\"swipeleft\"){\r\n				$(\".operatediv\").each(function(){//\u5411\u5de6\u6ed1\u52a8\u9690\u85cf\u539f\u6765\u7684\r\n					if($(this).attr(\"ifShow\")==2&&$(this).attr(\"_taskid\")!=taskid){\r\n						$(this).animate({right:\"-280px\"},300).attr(\"ifShow\",1);\r\n						return false;\r\n					}\r\n				});\r\n				if($(\"#operate_\"+taskid).attr(\"ifShow\")==1){\r\n					$(\"#operate_\"+taskid).animate({right:\"0px\"},300).attr(\"ifShow\",2);\r\n				}\r\n			}else if(e.type==\"swiperight\"){\r\n				$(\".operatediv\").animate({right:\"-280px\"},300).attr(\"ifShow\",1);\r\n			}\r\n		}\r\n	\r\n		function getLeftButton(){ \r\n			return \"1,".toCharArray();
    _jsp_string2 = "\r\n\r\n".toCharArray();
  }
}
